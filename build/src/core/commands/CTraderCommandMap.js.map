{"version":3,"file":"CTraderCommandMap.js","sourceRoot":"","sources":["../../../../src/core/commands/CTraderCommandMap.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA,qDAA0D;AAI1D,MAAa,iBAAiB;IAI1B,YAAoB,EAAE,IAAI,GAAgC;QAH1D,kDAAoD;QACpD,0CAA+C;QAG3C,uBAAA,IAAI,mCAAiB,IAAI,GAAG,EAAE,MAAA,CAAC;QAC/B,uBAAA,IAAI,2BAAS,IAAI,MAAA,CAAC;IACtB,CAAC;IAED,IAAW,YAAY;QACnB,OAAO,CAAE,GAAG,uBAAA,IAAI,uCAAc,CAAC,MAAM,EAAE,EAAG,CAAC;IAC/C,CAAC;IAEM,MAAM,CAAE,EAAE,WAAW,EAAE,OAAO,GAGpC;QACG,MAAM,OAAO,GAAmB,IAAI,+BAAc,CAAC,EAAE,WAAW,GAAG,CAAC,CAAC;QAErE,uBAAA,IAAI,uCAAc,CAAC,GAAG,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC;QAC7C,uBAAA,IAAI,+BAAM,MAAV,IAAI,EAAO,OAAO,CAAC,CAAC;QAEpB,OAAO,OAAO,CAAC,eAAe,CAAC;IACnC,CAAC;IAEM,WAAW,CAAE,WAAmB;QACnC,MAAM,OAAO,GAA+B,uBAAA,IAAI,uCAAc,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QAEhF,IAAI,CAAC,OAAO,EAAE;YACV,OAAO,SAAS,CAAC;SACpB;QAED,uBAAA,IAAI,uCAAc,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;QAEvC,OAAO,OAAO,CAAC;IACnB,CAAC;CACJ;AApCD,8CAoCC","sourcesContent":["import { CTraderCommand } from \"#commands/CTraderCommand\";\r\nimport { CTraderCommandMapParameters } from \"#commands/CTraderCommandMapParameters\";\r\nimport { GenericObject } from \"#utilities/GenericObject\";\r\n\r\nexport class CTraderCommandMap {\r\n    readonly #openCommands: Map<string, CTraderCommand>;\r\n    readonly #send: (...parameters: any[]) => void;\r\n\r\n    public constructor ({ send, }: CTraderCommandMapParameters) {\r\n        this.#openCommands = new Map();\r\n        this.#send = send;\r\n    }\r\n\r\n    public get openCommands (): CTraderCommand[] {\r\n        return [ ...this.#openCommands.values(), ];\r\n    }\r\n\r\n    public create ({ clientMsgId, message, }: {\r\n        clientMsgId: string;\r\n        message: GenericObject;\r\n    }): Promise<GenericObject> {\r\n        const command: CTraderCommand = new CTraderCommand({ clientMsgId, });\r\n\r\n        this.#openCommands.set(clientMsgId, command);\r\n        this.#send(message);\r\n\r\n        return command.responsePromise;\r\n    }\r\n\r\n    public extractById (clientMsgId: string): CTraderCommand | undefined {\r\n        const command: CTraderCommand | undefined = this.#openCommands.get(clientMsgId);\r\n\r\n        if (!command) {\r\n            return undefined;\r\n        }\r\n\r\n        this.#openCommands.delete(clientMsgId);\r\n\r\n        return command;\r\n    }\r\n}\r\n"]}